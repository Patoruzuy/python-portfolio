{% extends "base.html" %}

{% block title %}{{ post.title }} - Blog{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/markdown.css') }}">
{% endblock %}

{% block content %}
<article class="blog-post-detail">
    <header class="post-header">
        <div class="container">
            <span class="post-category-badge">{{ post.category }}</span>
            <h1>{{ post.title }}</h1>
            <div class="post-meta-detail">
                <span><i class="fas fa-user"></i> {{ post.author }}</span>
                <span><i class="far fa-calendar"></i> {{ post.date|format_date }}</span>
                <span><i class="far fa-clock"></i> {{ post.read_time }}</span>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="post-content-layout">
            <div class="post-main-content">
                <div class="post-featured-image">
                    <img src="{{ post.image_url }}" alt="{{ post.title }}" onerror="this.src='/static/images/placeholder.jpg'">
                </div>
                
                <div class="post-body">
                    <p class="lead">{{ post.excerpt }}</p>
                    
                    <!-- Render markdown content as HTML -->
                    <div class="markdown-content">
                        {{ post.content_html|safe }}
                    </div>
                </div>
                
                <div class="post-tags-section">
                    <h3>Tags</h3>
                    <div class="post-tags">
                        {% for tag in post.tags_list %}
                        <span class="tag">{{ tag }}</span>
                        {% endfor %}
                    </div>
                </div>
                
                <div class="post-navigation">
                    <a href="{{ url_for('blog') }}" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Back to Blog
                    </a>
                </div>
            </div>
            
            <aside class="post-sidebar">
                <div class="sidebar-widget">
                    <h3>About the Author</h3>
                    <div class="author-bio">
                        <div class="author-avatar">
                            {% if owner and owner.profile_image %}
                            <img src="{{ owner.profile_image }}" alt="Author Avatar" style="width: 100%; height: 100%; object-fit: cover;">
                            {% else %}
                            <i class="fas fa-user-circle"></i>
                            {% endif %}
                        </div>
                        <p><strong>{{ post.author }}</strong></p>
                        <p>{{ owner.bio if owner else 'Experienced Python developer sharing insights on software engineering and best practices.' }}</p>
                    </div>
                </div>
                
                <div class="sidebar-widget">
                    <h3>Share This Post</h3>
                    <div class="share-buttons">
                        <a href="https://twitter.com/intent/tweet?url={{ request.url }}&text={{ post.title }}" target="_blank" rel="noopener noreferrer" class="share-btn twitter" title="Share on Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.url }}" target="_blank" rel="noopener noreferrer" class="share-btn linkedin" title="Share on LinkedIn">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.url }}" target="_blank" rel="noopener noreferrer" class="share-btn facebook" title="Share on Facebook">
                            <i class="fab fa-facebook"></i>
                        </a>
                    </div>
                </div>
            </aside>
        </div>
    </div>
</article>
{% endblock %}
